Sure ğŸ‘
Below is a simple and clean example of converting your StudentsController to use SQL Server stored procedures in ASP.NET Core MVC (.NET 8) with EF Core.

Iâ€™ll keep it copy-paste ready and aligned with how youâ€™ll later use stored procedures in your Meeting Attendance system.


---

1ï¸âƒ£ Create Stored Procedures in SQL Server

Run these in SQL Server Management Studio:

-- Get all students
CREATE PROCEDURE sp_Students_GetAll
AS
BEGIN
    SELECT Id, Name, Age
    FROM Students
END
GO

-- Insert student
CREATE PROCEDURE sp_Students_Insert
    @Name NVARCHAR(100),
    @Age INT
AS
BEGIN
    INSERT INTO Students (Name, Age)
    VALUES (@Name, @Age)
END
GO


---

2ï¸âƒ£ Update DbContext (IMPORTANT)

ğŸ“ Data â†’ AppDbContext.cs

Add this method (keep your DbSet):

using Microsoft.EntityFrameworkCore;
using MvcEfCoreSample.Models;

namespace MvcEfCoreSample.Data
{
    public class AppDbContext : DbContext
    {
        public AppDbContext(DbContextOptions<AppDbContext> options)
            : base(options)
        {
        }

        public DbSet<Student> Students { get; set; }

        // Stored Procedure: Get All Students
        public List<Student> GetStudents()
        {
            return Students
                .FromSqlRaw("EXEC sp_Students_GetAll")
                .AsNoTracking()
                .ToList();
        }

        // Stored Procedure: Insert Student
        public void InsertStudent(Student student)
        {
            Database.ExecuteSqlRaw(
                "EXEC sp_Students_Insert @Name, @Age",
                new SqlParameter("@Name", student.Name),
                new SqlParameter("@Age", student.Age)
            );
        }
    }
}

ğŸ‘‰ Donâ€™t forget to add:

using Microsoft.Data.SqlClient;


---

3ï¸âƒ£ Update StudentsController to Use Stored Procedures

ğŸ“ Controllers â†’ StudentsController.cs

using Microsoft.AspNetCore.Mvc;
using MvcEfCoreSample.Data;
using MvcEfCoreSample.Models;

namespace MvcEfCoreSample.Controllers
{
    public class StudentsController : Controller
    {
        private readonly AppDbContext _context;

        public StudentsController(AppDbContext context)
        {
            _context = context;
        }

        // GET: Students
        public IActionResult Index()
        {
            var students = _context.GetStudents(); // SP call
            return View(students);
        }

        // GET: Students/Create
        public IActionResult Create()
        {
            return View();
        }

        // POST: Students/Create
        [HttpPost]
        [ValidateAntiForgeryToken]
        public IActionResult Create(Student student)
        {
            if (ModelState.IsValid)
            {
                _context.InsertStudent(student); // SP call
                return RedirectToAction(nameof(Index));
            }

            return View(student);
        }
    }
}


---

4ï¸âƒ£ Views (No Changes Needed)

Your existing views still work:

âœ” Index.cshtml
âœ” Create.cshtml

EF Core maps the stored procedure result directly to the Student model.


---

5ï¸âƒ£ Key Notes (Important for Real Projects)

âœ” Why this approach is good

Uses EF Core tracking + mapping

Safe from SQL injection

Easy to migrate to DAL / Repository pattern

Perfect for enterprise systems


âš  Common Rules

Column names returned by SP must match model properties

Stored procedures do not auto-track changes

Use .AsNoTracking() for read-only queries



---

6ï¸âƒ£ Optional: Async Version (Recommended)

If you want best practice:

public async Task<List<Student>> GetStudentsAsync()
{
    return await Students
        .FromSqlRaw("EXEC sp_Students_GetAll")
        .AsNoTracking()
        .ToListAsync();
}


---

ğŸš€ Next Enhancements (Tell me what you want)

I can help you add:

âœ… Update / Delete stored procedures

âœ… Repository + Interface (DAL pattern)

âœ… Output parameters (like auto-generated IDs)

âœ… Stored procedure with filtering

âœ… Bootstrap + validation

âœ… Authentication + role-based access


Just say â€œnext, add update & delete SPâ€ or â€œconvert to DALâ€ ğŸ‘


**

Below is a very simple, beginner-friendly tutorial to create an ASP.NET Core MVC (.NET 8.0) application using Entity Framework Core.
Iâ€™ll keep it step-by-step, minimal, and copy-paste ready ğŸ‘
(This is similar to what youâ€™ll use later for systems like your Meeting Attendance project.)


---

1ï¸âƒ£ Create the Project

Using Visual Studio

1. Open Visual Studio 2022


2. Create a new project


3. Choose ASP.NET Core Web App (Model-View-Controller)


4. Click Next


5. Set:

Project name: MvcEfCoreSample

Framework: .NET 8.0

Authentication: None



6. Click Create




---

2ï¸âƒ£ Install Required NuGet Packages

Open NuGet Package Manager and install:

Microsoft.EntityFrameworkCore.SqlServer
Microsoft.EntityFrameworkCore.Tools


---

3ï¸âƒ£ Create the Model (Entity)

ğŸ“ Models â†’ Student.cs

using System.ComponentModel.DataAnnotations;

namespace MvcEfCoreSample.Models
{
    public class Student
    {
        public int Id { get; set; }

        [Required]
        public string Name { get; set; }

        public int Age { get; set; }
    }
}


---

4ï¸âƒ£ Create the DbContext

ğŸ“ Data â†’ AppDbContext.cs

using Microsoft.EntityFrameworkCore;
using MvcEfCoreSample.Models;

namespace MvcEfCoreSample.Data
{
    public class AppDbContext : DbContext
    {
        public AppDbContext(DbContextOptions<AppDbContext> options)
            : base(options)
        {
        }

        public DbSet<Student> Students { get; set; }
    }
}


---

5ï¸âƒ£ Configure Database Connection

ğŸ“„ appsettings.json

{
  "ConnectionStrings": {
    "DefaultConnection": "Server=.;Database=MvcEfCoreDb;Trusted_Connection=True;TrustServerCertificate=True"
  }
}


---

6ï¸âƒ£ Register DbContext in Program.cs

ğŸ“„ Program.cs

using Microsoft.EntityFrameworkCore;
using MvcEfCoreSample.Data;

var builder = WebApplication.CreateBuilder(args);

builder.Services.AddControllersWithViews();

builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseSqlServer(
        builder.Configuration.GetConnectionString("DefaultConnection")
    ));

var app = builder.Build();

app.UseStaticFiles();
app.UseRouting();

app.MapControllerRoute(
    name: "default",
    pattern: "{controller=Home}/{action=Index}/{id?}");

app.Run();


---

7ï¸âƒ£ Create Controller

ğŸ“ Controllers â†’ StudentsController.cs

using Microsoft.AspNetCore.Mvc;
using MvcEfCoreSample.Data;
using MvcEfCoreSample.Models;

namespace MvcEfCoreSample.Controllers
{
    public class StudentsController : Controller
    {
        private readonly AppDbContext _context;

        public StudentsController(AppDbContext context)
        {
            _context = context;
        }

        // GET: Students
        public IActionResult Index()
        {
            var students = _context.Students.ToList();
            return View(students);
        }

        // GET: Students/Create
        public IActionResult Create()
        {
            return View();
        }

        // POST: Students/Create
        [HttpPost]
        public IActionResult Create(Student student)
        {
            if (ModelState.IsValid)
            {
                _context.Students.Add(student);
                _context.SaveChanges();
                return RedirectToAction(nameof(Index));
            }
            return View(student);
        }
    }
}


---

8ï¸âƒ£ Create Views

ğŸ“ Views â†’ Students â†’ Index.cshtml

@model List<MvcEfCoreSample.Models.Student>

<h2>Student List</h2>

<a asp-action="Create">Add New</a>

<table border="1">
    <tr>
        <th>Name</th>
        <th>Age</th>
    </tr>

@foreach (var item in Model)
{
    <tr>
        <td>@item.Name</td>
        <td>@item.Age</td>
    </tr>
}
</table>


---

ğŸ“ Views â†’ Students â†’ Create.cshtml

@model MvcEfCoreSample.Models.Student

<h2>Add Student</h2>

<form asp-action="Create" method="post">
    <div>
        <label>Name</label>
        <input asp-for="Name" />
    </div>

    <div>
        <label>Age</label>
        <input asp-for="Age" />
    </div>

    <button type="submit">Save</button>
</form>


---

9ï¸âƒ£ Create Database (Migration)

Open Package Manager Console:

Add-Migration InitialCreate
Update-Database

âœ” This creates:

Database: MvcEfCoreDb

Table: Students



---

ğŸ”Ÿ Run the App

1. Run the project


2. Go to:



https://localhost:xxxx/Students

3. Add students â†’ data saved to SQL Server ğŸ‰




---

ğŸ§  What You Just Learned

âœ” MVC structure
âœ” EF Core DbContext
âœ” SQL Server connection
âœ” CRUD (Create + Read)
âœ” .NET 8 minimal hosting model


---

Next Steps (Recommended)

Since youâ€™re building real systems like Meeting Attendance & User Management, next we can add:

âœ… Edit / Delete

âœ… Bootstrap UI

âœ… Repository (DAL) pattern

âœ… Authentication (Login / Roles)

âœ… Stored Procedures with EF Core


ğŸ‘‰ Just tell me what you want to add next, and Iâ€™ll extend this tutorial step-by-step.
