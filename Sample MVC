Perfect üëç ‚Äî let‚Äôs go step-by-step and explain everything clearly like a beginner-friendly tutorial.

We‚Äôll review the In Module project you just created using ASP.NET Core MVC + Entity Framework Core + Stored Procedure, and explain how each part works, why we use it, and how the data flows.


---

üß© PROJECT OVERVIEW

Goal:
To create a simple Inventory ‚ÄúIN Transaction‚Äù system where you can:

Input an item name and quantity

Save it to a database using a stored procedure

Use Entity Framework Core (EF Core) for the database connection



---

üß† WHAT HAPPENS BEHIND THE SCENES

Here‚Äôs the simple flow:

(View) Index.cshtml  ‚Üí  (Controller) InController.cs  ‚Üí  (Database) SQL Server via Stored Procedure

üßæ Step-by-step explanation:

1. The user types an Item Name and Quantity in the web form (View).


2. The Controller receives that data when the form is submitted.


3. The Controller uses Entity Framework Core to connect to the SQL Server.


4. The Controller executes a Stored Procedure that inserts the data into the database.


5. A success message is displayed to the user.




---

üß± STEP 1: The SQL Side

1Ô∏è‚É£ Create the Table and Stored Procedure

CREATE TABLE tblInTransactions (
    InID INT IDENTITY(1,1) PRIMARY KEY,
    ItemName NVARCHAR(100),
    Quantity INT,
    DateIn DATETIME DEFAULT GETDATE()
);
GO

CREATE PROCEDURE sp_InsertInTransaction
    @ItemName NVARCHAR(100),
    @Quantity INT
AS
BEGIN
    INSERT INTO tblInTransactions (ItemName, Quantity)
    VALUES (@ItemName, @Quantity);
END;
GO

üí¨ Explanation:

tblInTransactions ‚Üí your table to store incoming inventory.

sp_InsertInTransaction ‚Üí your stored procedure that inserts data into the table.

IDENTITY(1,1) ‚Üí automatically creates IDs like 1, 2, 3...

DEFAULT GETDATE() ‚Üí automatically stores the current date/time when inserting.



---

üß© STEP 2: The Model ‚Äî InTransaction.cs

using System;
using System.ComponentModel.DataAnnotations;

namespace InventoryInModule.Models
{
    public class InTransaction
    {
        [Key]                     // Marks InID as the primary key
        public int InID { get; set; }

        [Required]                // Must have a value (not null)
        [StringLength(100)]       // Max 100 characters
        public string ItemName { get; set; }

        [Required]                // Must have a value
        public int Quantity { get; set; }

        public DateTime DateIn { get; set; }  // Stores the date/time of transaction
    }
}

üí¨ Explanation:

This class represents your table structure in C#.

EF Core uses this model to understand what kind of data you‚Äôll store.

[Required] ensures the user must fill in those fields before saving.



---

üß± STEP 3: Database Context ‚Äî ApplicationDbContext.cs

using Microsoft.EntityFrameworkCore;
using InventoryInModule.Models;

namespace InventoryInModule.Data
{
    public class ApplicationDbContext : DbContext
    {
        // Constructor to accept options (like connection string)
        public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options)
            : base(options)
        {
        }

        // Represent the table in code
        public DbSet<InTransaction> InTransactions { get; set; }
    }
}

üí¨ Explanation:

DbContext is a bridge between your code and your SQL database.

DbSet<InTransaction> represents the tblInTransactions table.

EF Core uses this to send and receive data from SQL Server.



---

‚öôÔ∏è STEP 4: Program.cs (Database Connection)

using InventoryInModule.Data;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);

// Add MVC services
builder.Services.AddControllersWithViews();

// Connect EF Core to SQL Server
builder.Services.AddDbContext<ApplicationDbContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));

var app = builder.Build();

app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseRouting();
app.UseAuthorization();

// Set default controller
app.MapControllerRoute(
    name: "default",
    pattern: "{controller=In}/{action=Index}/{id?}");

app.Run();

üí¨ Explanation:

Registers EF Core (ApplicationDbContext) so controllers can use it.

Reads connection string from appsettings.json.

Tells the app to start with InController and Index view by default.



---

üß± STEP 5: Controller ‚Äî InController.cs

using Microsoft.AspNetCore.Mvc;
using Microsoft.Data.SqlClient;
using Microsoft.EntityFrameworkCore;
using InventoryInModule.Data;
using InventoryInModule.Models;
using System.Threading.Tasks;

namespace InventoryInModule.Controllers
{
    public class InController : Controller
    {
        private readonly ApplicationDbContext _context;

        public InController(ApplicationDbContext context)
        {
            _context = context;   // injects database connection
        }

        public IActionResult Index()
        {
            return View();        // show the form
        }

        [HttpPost]
        public async Task<IActionResult> Index(InTransaction model)
        {
            if (ModelState.IsValid)
            {
                // Prepare parameters for stored procedure
                var itemNameParam = new SqlParameter("@ItemName", model.ItemName);
                var qtyParam = new SqlParameter("@Quantity", model.Quantity);

                // Execute the stored procedure
                await _context.Database.ExecuteSqlRawAsync(
                    "EXEC sp_InsertInTransaction @ItemName, @Quantity",
                    itemNameParam, qtyParam
                );

                ViewBag.Message = "Item successfully added!";
                ModelState.Clear(); // clears the form
            }

            return View();
        }
    }
}

üí¨ Explanation:

Index() (GET) ‚Üí Shows the input form.

Index() (POST) ‚Üí Handles the form submission.

ExecuteSqlRawAsync() ‚Üí Executes the stored procedure directly.

ViewBag.Message ‚Üí Sends success message to the View.



---

üé® STEP 6: View ‚Äî Views/In/Index.cshtml

@model InventoryInModule.Models.InTransaction
@{
    ViewData["Title"] = "In Module";
}

<div class="container mt-4">
    <h2>In Transaction Entry</h2>

    <form asp-action="Index" method="post" class="mt-3">
        <div class="mb-3">
            <label asp-for="ItemName" class="form-label"></label>
            <input asp-for="ItemName" class="form-control" required />
        </div>
        <div class="mb-3">
            <label asp-for="Quantity" class="form-label"></label>
            <input asp-for="Quantity" type="number" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>

    @if (ViewBag.Message != null)
    {
        <div class="alert alert-success mt-3">@ViewBag.Message</div>
    }
</div>

üí¨ Explanation:

The form sends data to InController when you click Save.

asp-for automatically binds form fields to the model (ItemName, Quantity).

After saving, it shows a success message.



---

üîÑ STEP 7: Data Flow Summary

Here‚Äôs the whole picture üëá

Step	Component	Action

1	User enters data	Fills in item name + quantity
2	View (Index.cshtml)	Sends data to Controller via POST
3	Controller (InController.cs)	Validates data, calls stored procedure
4	Database (sp_InsertInTransaction)	Inserts data into tblInTransactions
5	Controller	Sends success message back
6	View	Displays ‚ÄúItem successfully added!‚Äù



---

üß≠ STEP 8: Run and Test

1. Run the project:

dotnet run


2. Open your browser:

https://localhost:xxxx/In


3. Fill in:

Item Name: Cable
Quantity: 10


4. Click Save
‚úÖ Your data is inserted into SQL via stored procedure!




---

üí° Key Takeaways for Beginners

Concept	Meaning

MVC	Model-View-Controller ‚Äî separates logic, data, and UI.
Model	Represents your data (ItemName, Quantity).
Controller	Handles the logic and data flow between View and Model.
View	The user interface (HTML form).
EF Core	A tool that helps you talk to your database using C#.
Stored Procedure	A saved SQL command that runs in your database.
ApplicationDbContext	The class that connects EF Core to SQL Server.



---

Would you like me to add the next step ‚Äî a ‚ÄúView All Transactions‚Äù page using Entity Framework (no stored procedure) so you can list all the saved records in a table?



***

Perfect ‚Äî let‚Äôs level up your In Module project using ASP.NET Core MVC + Entity Framework Core + Stored Procedure ‚úÖ

We‚Äôll go step-by-step so you can run it easily in Visual Studio or VS Code.
The project will allow you to add an ‚ÄúIN Transaction‚Äù that saves to a SQL table using a stored procedure executed through EF Core.


---

üß© PROJECT OVERVIEW

üéØ Goal:

A simple Inventory In Module that:

Lets users input an item name and quantity.

Saves the data using a SQL stored procedure.

Uses Entity Framework Core for database access.



---

üß± STEP 1: Create SQL Table + Stored Procedure

In SQL Server Management Studio (SSMS), create a new database (e.g. InventoryDB) and run:

CREATE TABLE tblInTransactions (
    InID INT IDENTITY(1,1) PRIMARY KEY,
    ItemName NVARCHAR(100),
    Quantity INT,
    DateIn DATETIME DEFAULT GETDATE()
);
GO

CREATE PROCEDURE sp_InsertInTransaction
    @ItemName NVARCHAR(100),
    @Quantity INT
AS
BEGIN
    INSERT INTO tblInTransactions (ItemName, Quantity)
    VALUES (@ItemName, @Quantity);
END;
GO


---

‚öôÔ∏è STEP 2: Create ASP.NET Core MVC Project

In your terminal (Git Bash or PowerShell):

dotnet new mvc -n InventoryInModule
cd InventoryInModule

This creates an MVC project.


---

üß© STEP 3: Install Entity Framework Core SQL Server Provider

Run these commands inside the project folder:

dotnet add package Microsoft.EntityFrameworkCore
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.Tools


---

‚öôÔ∏è STEP 4: Add Connection String

In appsettings.json:

{
  "ConnectionStrings": {
    "DefaultConnection": "Server=YOUR_SERVER;Database=InventoryDB;Trusted_Connection=True;TrustServerCertificate=True;"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}

> üí° Replace YOUR_SERVER with your actual SQL Server name.




---

üß± STEP 5: Create the Model

File: Models/InTransaction.cs

using System;
using System.ComponentModel.DataAnnotations;

namespace InventoryInModule.Models
{
    public class InTransaction
    {
        [Key]
        public int InID { get; set; }

        [Required]
        [StringLength(100)]
        public string ItemName { get; set; }

        [Required]
        public int Quantity { get; set; }

        public DateTime DateIn { get; set; }
    }
}


---

üß± STEP 6: Create the Database Context

File: Data/ApplicationDbContext.cs

using Microsoft.EntityFrameworkCore;
using InventoryInModule.Models;

namespace InventoryInModule.Data
{
    public class ApplicationDbContext : DbContext
    {
        public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options)
            : base(options)
        {
        }

        public DbSet<InTransaction> InTransactions { get; set; }
    }
}


---

üß© STEP 7: Register the Context in Program.cs

File: Program.cs

using InventoryInModule.Data;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
builder.Services.AddControllersWithViews();

// Register EF Core
builder.Services.AddDbContext<ApplicationDbContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));

var app = builder.Build();

if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Home/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseRouting();
app.UseAuthorization();

app.MapControllerRoute(
    name: "default",
    pattern: "{controller=In}/{action=Index}/{id?}");

app.Run();


---

üß© STEP 8: Create Controller

File: Controllers/InController.cs

using Microsoft.AspNetCore.Mvc;
using Microsoft.Data.SqlClient;
using Microsoft.EntityFrameworkCore;
using InventoryInModule.Data;
using InventoryInModule.Models;
using System.Threading.Tasks;

namespace InventoryInModule.Controllers
{
    public class InController : Controller
    {
        private readonly ApplicationDbContext _context;

        public InController(ApplicationDbContext context)
        {
            _context = context;
        }

        public IActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public async Task<IActionResult> Index(InTransaction model)
        {
            if (ModelState.IsValid)
            {
                var itemNameParam = new SqlParameter("@ItemName", model.ItemName);
                var qtyParam = new SqlParameter("@Quantity", model.Quantity);

                await _context.Database.ExecuteSqlRawAsync(
                    "EXEC sp_InsertInTransaction @ItemName, @Quantity",
                    itemNameParam, qtyParam
                );

                ViewBag.Message = "Item successfully added!";
                ModelState.Clear();
            }

            return View();
        }
    }
}


---

üé® STEP 9: Create View

File: Views/In/Index.cshtml

@model InventoryInModule.Models.InTransaction
@{
    ViewData["Title"] = "In Module";
}

<div class="container mt-4">
    <h2>In Transaction Entry</h2>

    <form asp-action="Index" method="post" class="mt-3">
        <div class="mb-3">
            <label asp-for="ItemName" class="form-label"></label>
            <input asp-for="ItemName" class="form-control" required />
        </div>
        <div class="mb-3">
            <label asp-for="Quantity" class="form-label"></label>
            <input asp-for="Quantity" type="number" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>

    @if (ViewBag.Message != null)
    {
        <div class="alert alert-success mt-3">@ViewBag.Message</div>
    }
</div>


---

üöÄ STEP 10: Run the Project

In terminal or Visual Studio:

dotnet run

Then open:

https://localhost:xxxx/In

Enter an item and quantity ‚Üí click Save ‚Üí
‚úÖ The stored procedure will run through Entity Framework Core and insert data into tblInTransactions.


---

‚úÖ SUMMARY

Component	Purpose

tblInTransactions	Database table
sp_InsertInTransaction	SQL stored procedure
InTransaction.cs	EF Core model
ApplicationDbContext.cs	EF Core DB context
InController.cs	Controller to call SP
Index.cshtml	Simple input view



---

Would you like me to extend this example next to include:

üîç Viewing all saved transactions (list page), or

üì¶ Dropdown for selecting item from an ‚ÄúItems‚Äù table?

***



Absolutely üëç Let‚Äôs create a simple ‚ÄúIN Module‚Äù project using ASP.NET Core MVC + SQL Server Stored Procedure ‚Äî step by step.

We‚Äôll build a small Inventory ‚ÄúIN Transaction‚Äù where users can record items being received into the system.


---

üß© PROJECT OVERVIEW

Goal: Create a page where the user can input an item and quantity, then save to the database via a stored procedure.

Example Table:

tblInTransactions

Column Name	Data Type	Description

InID	INT (PK, IDENTITY)	Auto-generated primary key
ItemName	NVARCHAR(100)	Name of item
Quantity	INT	Quantity received
DateIn	DATETIME	Transaction date



---

üõ†Ô∏è STEP 1: Create SQL Table & Stored Procedure

In SQL Server, run this:

CREATE TABLE tblInTransactions (
    InID INT IDENTITY(1,1) PRIMARY KEY,
    ItemName NVARCHAR(100),
    Quantity INT,
    DateIn DATETIME DEFAULT GETDATE()
);
GO

CREATE PROCEDURE sp_InsertInTransaction
    @ItemName NVARCHAR(100),
    @Quantity INT
AS
BEGIN
    INSERT INTO tblInTransactions (ItemName, Quantity)
    VALUES (@ItemName, @Quantity);
END;
GO


---

üñ•Ô∏è STEP 2: Create ASP.NET Core MVC Project

In Visual Studio or CLI:

dotnet new mvc -n InventoryInModule
cd InventoryInModule


---

‚öôÔ∏è STEP 3: Add Connection String

In appsettings.json:

{
  "ConnectionStrings": {
    "DefaultConnection": "Server=YOUR_SERVER;Database=InventoryDB;Trusted_Connection=True;TrustServerCertificate=True;"
  }
}


---

üß± STEP 4: Create Model

File: Models/InTransaction.cs

namespace InventoryInModule.Models
{
    public class InTransaction
    {
        public int InID { get; set; }
        public string ItemName { get; set; }
        public int Quantity { get; set; }
        public DateTime DateIn { get; set; }
    }
}


---

üß© STEP 5: Create Controller

File: Controllers/InController.cs

using Microsoft.AspNetCore.Mvc;
using Microsoft.Data.SqlClient;
using Microsoft.Extensions.Configuration;
using InventoryInModule.Models;
using System.Data;

namespace InventoryInModule.Controllers
{
    public class InController : Controller
    {
        private readonly IConfiguration _configuration;

        public InController(IConfiguration configuration)
        {
            _configuration = configuration;
        }

        public IActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public IActionResult Index(InTransaction model)
        {
            if (ModelState.IsValid)
            {
                string connStr = _configuration.GetConnectionString("DefaultConnection");

                using (SqlConnection conn = new SqlConnection(connStr))
                {
                    using (SqlCommand cmd = new SqlCommand("sp_InsertInTransaction", conn))
                    {
                        cmd.CommandType = CommandType.StoredProcedure;
                        cmd.Parameters.AddWithValue("@ItemName", model.ItemName);
                        cmd.Parameters.AddWithValue("@Quantity", model.Quantity);
                        conn.Open();
                        cmd.ExecuteNonQuery();
                    }
                }

                ViewBag.Message = "Item successfully added!";
                ModelState.Clear();
            }

            return View();
        }
    }
}


---

üé® STEP 6: Create View

File: Views/In/Index.cshtml

@model InventoryInModule.Models.InTransaction
@{
    ViewData["Title"] = "In Module";
}

<h2>In Transaction Entry</h2>

<form asp-action="Index" method="post">
    <div class="form-group">
        <label>Item Name</label>
        <input asp-for="ItemName" class="form-control" required />
    </div>
    <div class="form-group">
        <label>Quantity</label>
        <input asp-for="Quantity" type="number" class="form-control" required />
    </div>
    <button type="submit" class="btn btn-primary mt-3">Save</button>
</form>

@if (ViewBag.Message != null)
{
    <div class="alert alert-success mt-3">@ViewBag.Message</div>
}


---

üöÄ STEP 7: Run the Project

Press F5 or run:

dotnet run

Navigate to:

https://localhost:xxxx/In

Try adding an item and quantity.
The record will be inserted into tblInTransactions via the stored procedure.



---

‚úÖ Summary

You‚Äôve created:

‚úÖ SQL Table + Stored Procedure

‚úÖ Model (InTransaction)

‚úÖ Controller (InController)

‚úÖ View (Index.cshtml)

‚úÖ Connected everything using ADO.NET



---

Would you like me to extend this example to include:

üîç Viewing all ‚ÄúIN‚Äù transactions (list page)

‚úèÔ∏è Editing or deleting records

üì¶ Integration with an Items table (lookup dropdown)?
