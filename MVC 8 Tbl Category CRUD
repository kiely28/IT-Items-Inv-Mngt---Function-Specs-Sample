Perfect üëç Let's build a complete CRUD for tbl_category using ASP.NET Core MVC 8 with a SQL Server stored procedure.

We'll go step-by-step and I‚Äôll give you full working code that you can copy-paste and run.


---

üß± 1. SQL SERVER: Create Table + Stored Procedures

Run this SQL script in your SQL Server:

CREATE TABLE tbl_category (
    CategoryId INT IDENTITY(1,1) PRIMARY KEY,
    CategoryName NVARCHAR(100),
    Description NVARCHAR(255)
);
GO

-- ===== STORED PROCEDURES =====

-- Insert
CREATE PROCEDURE spAddCategory
    @CategoryName NVARCHAR(100),
    @Description NVARCHAR(255)
AS
BEGIN
    INSERT INTO tbl_category (CategoryName, Description)
    VALUES (@CategoryName, @Description);
END;
GO

-- Get All
CREATE PROCEDURE spGetAllCategories
AS
BEGIN
    SELECT CategoryId, CategoryName, Description
    FROM tbl_category;
END;
GO

-- Get By Id
CREATE PROCEDURE spGetCategoryById
    @CategoryId INT
AS
BEGIN
    SELECT CategoryId, CategoryName, Description
    FROM tbl_category
    WHERE CategoryId = @CategoryId;
END;
GO

-- Update
CREATE PROCEDURE spUpdateCategory
    @CategoryId INT,
    @CategoryName NVARCHAR(100),
    @Description NVARCHAR(255)
AS
BEGIN
    UPDATE tbl_category
    SET CategoryName = @CategoryName,
        Description = @Description
    WHERE CategoryId = @CategoryId;
END;
GO

-- Delete
CREATE PROCEDURE spDeleteCategory
    @CategoryId INT
AS
BEGIN
    DELETE FROM tbl_category WHERE CategoryId = @CategoryId;
END;
GO


---

‚öôÔ∏è 2. ASP.NET Core MVC Project Setup

Run in terminal:

dotnet new mvc -n CategoryCRUDApp
cd CategoryCRUDApp

Add connection string in appsettings.json:

"ConnectionStrings": {
  "DefaultConnection": "Server=YOUR_SERVER_NAME;Database=YourDatabase;Trusted_Connection=True;TrustServerCertificate=True;"
}


---

üìò 3. Create Model

Models/Category.cs

namespace CategoryCRUDApp.Models
{
    public class Category
    {
        public int CategoryId { get; set; }
        public string CategoryName { get; set; } = string.Empty;
        public string? Description { get; set; }
    }
}


---

üíæ 4. Create Data Access Layer (DAL)

Data/CategoryDAL.cs

using System.Data;
using System.Data.SqlClient;
using CategoryCRUDApp.Models;
using Microsoft.Extensions.Configuration;

namespace CategoryCRUDApp.Data
{
    public class CategoryDAL
    {
        private readonly string _connectionString;

        public CategoryDAL(IConfiguration configuration)
        {
            _connectionString = configuration.GetConnectionString("DefaultConnection");
        }

        public List<Category> GetAll()
        {
            List<Category> list = new();
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spGetAllCategories", con);
                cmd.CommandType = CommandType.StoredProcedure;
                con.Open();
                SqlDataReader dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    list.Add(new Category
                    {
                        CategoryId = Convert.ToInt32(dr["CategoryId"]),
                        CategoryName = dr["CategoryName"].ToString() ?? "",
                        Description = dr["Description"].ToString()
                    });
                }
            }
            return list;
        }

        public Category GetById(int id)
        {
            Category cat = new();
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spGetCategoryById", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryId", id);
                con.Open();
                SqlDataReader dr = cmd.ExecuteReader();
                if (dr.Read())
                {
                    cat.CategoryId = Convert.ToInt32(dr["CategoryId"]);
                    cat.CategoryName = dr["CategoryName"].ToString() ?? "";
                    cat.Description = dr["Description"].ToString();
                }
            }
            return cat;
        }

        public void Add(Category category)
        {
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spAddCategory", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryName", category.CategoryName);
                cmd.Parameters.AddWithValue("@Description", category.Description ?? (object)DBNull.Value);
                con.Open();
                cmd.ExecuteNonQuery();
            }
        }

        public void Update(Category category)
        {
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spUpdateCategory", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryId", category.CategoryId);
                cmd.Parameters.AddWithValue("@CategoryName", category.CategoryName);
                cmd.Parameters.AddWithValue("@Description", category.Description ?? (object)DBNull.Value);
                con.Open();
                cmd.ExecuteNonQuery();
            }
        }

        public void Delete(int id)
        {
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spDeleteCategory", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryId", id);
                con.Open();
                cmd.ExecuteNonQuery();
            }
        }
    }
}


---

üéÆ 5. Create Controller

Controllers/CategoryController.cs

using Microsoft.AspNetCore.Mvc;
using CategoryCRUDApp.Data;
using CategoryCRUDApp.Models;

namespace CategoryCRUDApp.Controllers
{
    public class CategoryController : Controller
    {
        private readonly CategoryDAL _categoryDAL;

        public CategoryController(IConfiguration configuration)
        {
            _categoryDAL = new CategoryDAL(configuration);
        }

        public IActionResult Index()
        {
            var list = _categoryDAL.GetAll();
            return View(list);
        }

        public IActionResult Details(int id)
        {
            var cat = _categoryDAL.GetById(id);
            return View(cat);
        }

        public IActionResult Create()
        {
            return View();
        }

        [HttpPost]
        public IActionResult Create(Category category)
        {
            if (ModelState.IsValid)
            {
                _categoryDAL.Add(category);
                return RedirectToAction(nameof(Index));
            }
            return View(category);
        }

        public IActionResult Edit(int id)
        {
            var cat = _categoryDAL.GetById(id);
            return View(cat);
        }

        [HttpPost]
        public IActionResult Edit(Category category)
        {
            if (ModelState.IsValid)
            {
                _categoryDAL.Update(category);
                return RedirectToAction(nameof(Index));
            }
            return View(category);
        }

        public IActionResult Delete(int id)
        {
            var cat = _categoryDAL.GetById(id);
            return View(cat);
        }

        [HttpPost, ActionName("Delete")]
        public IActionResult DeleteConfirmed(int id)
        {
            _categoryDAL.Delete(id);
            return RedirectToAction(nameof(Index));
        }
    }
}


---

üé® 6. Create Views

Create a folder:
Views/Category/

Then add the following Razor Views:

üü¢ Index.cshtml

@model IEnumerable<CategoryCRUDApp.Models.Category>

<h2>Category List</h2>
<p>
    <a class="btn btn-primary" asp-action="Create">Add New</a>
</p>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Category Name</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.CategoryId</td>
                <td>@item.CategoryName</td>
                <td>@item.Description</td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.CategoryId">Edit</a> |
                    <a asp-action="Details" asp-route-id="@item.CategoryId">Details</a> |
                    <a asp-action="Delete" asp-route-id="@item.CategoryId">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>

üü¢ Create.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Add New Category</h2>

<form asp-action="Create" method="post">
    <div class="form-group">
        <label>Category Name</label>
        <input asp-for="CategoryName" class="form-control" />
    </div>
    <div class="form-group">
        <label>Description</label>
        <input asp-for="Description" class="form-control" />
    </div>
    <br />
    <button type="submit" class="btn btn-success">Save</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>

üü¢ Edit.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Edit Category</h2>

<form asp-action="Edit" method="post">
    <input type="hidden" asp-for="CategoryId" />
    <div class="form-group">
        <label>Category Name</label>
        <input asp-for="CategoryName" class="form-control" />
    </div>
    <div class="form-group">
        <label>Description</label>
        <input asp-for="Description" class="form-control" />
    </div>
    <br />
    <button type="submit" class="btn btn-primary">Update</button>
    <a asp-action="Index" class="btn btn-secondary">Back</a>
</form>

üü¢ Details.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Category Details</h2>

<dl class="row">
    <dt class="col-sm-2">ID</dt>
    <dd class="col-sm-10">@Model.CategoryId</dd>

    <dt class="col-sm-2">Name</dt>
    <dd class="col-sm-10">@Model.CategoryName</dd>

    <dt class="col-sm-2">Description</dt>
    <dd class="col-sm-10">@Model.Description</dd>
</dl>

<a asp-action="Edit" asp-route-id="@Model.CategoryId" class="btn btn-primary">Edit</a>
<a asp-action="Index" class="btn btn-secondary">Back</a>

üü¢ Delete.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Delete Category</h2>

<h4>Are you sure you want to delete this category?</h4>
<div>
    <h5>@Model.CategoryName</h5>
    <p>@Model.Description</p>
</div>

<form asp-action="Delete">
    <input type="hidden" asp-for="CategoryId" />
    <button type="submit" class="btn btn-danger">Delete</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>


---

üöÄ 7. Run the App

dotnet run

Then open in browser:
üëâ https://localhost:5001/Category

You‚Äôll have a fully functional CRUD system using stored procedures in SQL Server.


---

Would you like me to enhance it with Bootstrap + DataTables UI (search/sort/paging) next?
