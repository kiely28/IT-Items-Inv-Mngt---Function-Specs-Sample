Perfect üëç Let‚Äôs build a complete working sample CRUD for tbl_category using ASP.NET Core MVC 8, Entity Framework Core 8, and Stored Procedures in SQL Server ‚Äî step-by-step and production-ready.


---

‚öôÔ∏è Project Setup

1. Create the Database and Stored Procedures

Run this in SQL Server Management Studio (SSMS):

CREATE DATABASE InventoryDB;
GO
USE InventoryDB;
GO

CREATE TABLE tbl_category (
    CategoryId INT IDENTITY(1,1) PRIMARY KEY,
    CategoryName NVARCHAR(100) NOT NULL,
    Description NVARCHAR(255) NULL
);
GO

-- Stored Procedures
CREATE PROCEDURE sp_GetAllCategories
AS
BEGIN
    SELECT * FROM tbl_category ORDER BY CategoryId DESC;
END
GO

CREATE PROCEDURE sp_GetCategoryById
    @CategoryId INT
AS
BEGIN
    SELECT * FROM tbl_category WHERE CategoryId = @CategoryId;
END
GO

CREATE PROCEDURE sp_InsertCategory
    @CategoryName NVARCHAR(100),
    @Description NVARCHAR(255)
AS
BEGIN
    INSERT INTO tbl_category (CategoryName, Description)
    VALUES (@CategoryName, @Description);
END
GO

CREATE PROCEDURE sp_UpdateCategory
    @CategoryId INT,
    @CategoryName NVARCHAR(100),
    @Description NVARCHAR(255)
AS
BEGIN
    UPDATE tbl_category
    SET CategoryName = @CategoryName,
        Description = @Description
    WHERE CategoryId = @CategoryId;
END
GO

CREATE PROCEDURE sp_DeleteCategory
    @CategoryId INT
AS
BEGIN
    DELETE FROM tbl_category WHERE CategoryId = @CategoryId;
END
GO


---

2. Create the ASP.NET Core MVC Project

In terminal or Visual Studio:

dotnet new mvc -n CategoryCRUDApp
cd CategoryCRUDApp

Install EF Core packages:

dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.Tools


---

3. Configure appsettings.json

{
  "ConnectionStrings": {
    "DefaultConnection": "Server=YOUR_SERVER_NAME;Database=InventoryDB;Trusted_Connection=True;TrustServerCertificate=True;"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}


---

4. Create Model ‚Üí Models/Category.cs

namespace CategoryCRUDApp.Models
{
    public class Category
    {
        public int CategoryId { get; set; }
        public string CategoryName { get; set; } = string.Empty;
        public string? Description { get; set; }
    }
}


---

5. Create DbContext ‚Üí Data/AppDbContext.cs

using Microsoft.EntityFrameworkCore;
using CategoryCRUDApp.Models;

namespace CategoryCRUDApp.Data
{
    public class AppDbContext : DbContext
    {
        public AppDbContext(DbContextOptions<AppDbContext> options)
            : base(options)
        {
        }

        public DbSet<Category> Categories { get; set; }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Category>().ToTable("tbl_category");
        }
    }
}


---

6. Register DbContext in Program.cs

using CategoryCRUDApp.Data;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);

builder.Services.AddControllersWithViews();

builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));

var app = builder.Build();

if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Home/Error");
}

app.UseStaticFiles();
app.UseRouting();
app.UseAuthorization();

app.MapControllerRoute(
    name: "default",
    pattern: "{controller=Category}/{action=Index}/{id?}");

app.Run();


---

7. Create Controller ‚Üí Controllers/CategoryController.cs

using Microsoft.AspNetCore.Mvc;
using Microsoft.Data.SqlClient;
using Microsoft.EntityFrameworkCore;
using CategoryCRUDApp.Data;
using CategoryCRUDApp.Models;

namespace CategoryCRUDApp.Controllers
{
    public class CategoryController : Controller
    {
        private readonly AppDbContext _context;

        public CategoryController(AppDbContext context)
        {
            _context = context;
        }

        // READ
        public async Task<IActionResult> Index()
        {
            var categories = await _context.Categories
                .FromSqlRaw("EXEC sp_GetAllCategories")
                .ToListAsync();
            return View(categories);
        }

        // CREATE - GET
        public IActionResult Create()
        {
            return View();
        }

        // CREATE - POST
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Create(Category category)
        {
            if (ModelState.IsValid)
            {
                var parameters = new[]
                {
                    new SqlParameter("@CategoryName", category.CategoryName),
                    new SqlParameter("@Description", (object?)category.Description ?? DBNull.Value)
                };

                await _context.Database.ExecuteSqlRawAsync("EXEC sp_InsertCategory @CategoryName, @Description", parameters);
                return RedirectToAction(nameof(Index));
            }
            return View(category);
        }

        // EDIT - GET
        public async Task<IActionResult> Edit(int id)
        {
            var param = new SqlParameter("@CategoryId", id);
            var category = await _context.Categories
                .FromSqlRaw("EXEC sp_GetCategoryById @CategoryId", param)
                .FirstOrDefaultAsync();

            if (category == null) return NotFound();
            return View(category);
        }

        // EDIT - POST
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Edit(Category category)
        {
            if (ModelState.IsValid)
            {
                var parameters = new[]
                {
                    new SqlParameter("@CategoryId", category.CategoryId),
                    new SqlParameter("@CategoryName", category.CategoryName),
                    new SqlParameter("@Description", (object?)category.Description ?? DBNull.Value)
                };

                await _context.Database.ExecuteSqlRawAsync("EXEC sp_UpdateCategory @CategoryId, @CategoryName, @Description", parameters);
                return RedirectToAction(nameof(Index));
            }
            return View(category);
        }

        // DELETE - GET
        public async Task<IActionResult> Delete(int id)
        {
            var param = new SqlParameter("@CategoryId", id);
            var category = await _context.Categories
                .FromSqlRaw("EXEC sp_GetCategoryById @CategoryId", param)
                .FirstOrDefaultAsync();

            if (category == null) return NotFound();
            return View(category);
        }

        // DELETE - POST
        [HttpPost, ActionName("Delete")]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> DeleteConfirmed(int CategoryId)
        {
            var param = new SqlParameter("@CategoryId", CategoryId);
            await _context.Database.ExecuteSqlRawAsync("EXEC sp_DeleteCategory @CategoryId", param);
            return RedirectToAction(nameof(Index));
        }
    }
}


---

8. Create Views (Razor)

Views/Category/Index.cshtml

@model IEnumerable<CategoryCRUDApp.Models.Category>

@{
    ViewData["Title"] = "Category List";
}

<h2>Categories</h2>
<a asp-action="Create" class="btn btn-primary mb-3">Add Category</a>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>ID</th>
            <th>Category Name</th>
            <th>Description</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.CategoryId</td>
            <td>@item.CategoryName</td>
            <td>@item.Description</td>
            <td>
                <a asp-action="Edit" asp-route-id="@item.CategoryId" class="btn btn-sm btn-warning">Edit</a>
                <a asp-action="Delete" asp-route-id="@item.CategoryId" class="btn btn-sm btn-danger">Delete</a>
            </td>
        </tr>
    }
    </tbody>
</table>

Views/Category/Create.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Add New Category</h2>
<form asp-action="Create" method="post">
    <div class="form-group">
        <label>Category Name</label>
        <input asp-for="CategoryName" class="form-control" />
    </div>
    <div class="form-group">
        <label>Description</label>
        <input asp-for="Description" class="form-control" />
    </div>
    <br />
    <button type="submit" class="btn btn-success">Save</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>

Views/Category/Edit.cshtml and Views/Category/Delete.cshtml

üëâ Same layout, just modify title/buttons accordingly.


---

‚úÖ Done!
You now have a fully functional CRUD for tbl_category using ASP.NET Core MVC 8, EF Core 8, and Stored Procedures ‚Äî all without raw SQL strings scattered across code.


---

Would you like me to include Bootstrap + DataTables integration for a nicer table UI (search, sort, pagination)?

***


Perfect üëç Let's build a complete CRUD for tbl_category using ASP.NET Core MVC 8 with a SQL Server stored procedure.

We'll go step-by-step and I‚Äôll give you full working code that you can copy-paste and run.


---

üß± 1. SQL SERVER: Create Table + Stored Procedures

Run this SQL script in your SQL Server:

CREATE TABLE tbl_category (
    CategoryId INT IDENTITY(1,1) PRIMARY KEY,
    CategoryName NVARCHAR(100),
    Description NVARCHAR(255)
);
GO

-- ===== STORED PROCEDURES =====

-- Insert
CREATE PROCEDURE spAddCategory
    @CategoryName NVARCHAR(100),
    @Description NVARCHAR(255)
AS
BEGIN
    INSERT INTO tbl_category (CategoryName, Description)
    VALUES (@CategoryName, @Description);
END;
GO

-- Get All
CREATE PROCEDURE spGetAllCategories
AS
BEGIN
    SELECT CategoryId, CategoryName, Description
    FROM tbl_category;
END;
GO

-- Get By Id
CREATE PROCEDURE spGetCategoryById
    @CategoryId INT
AS
BEGIN
    SELECT CategoryId, CategoryName, Description
    FROM tbl_category
    WHERE CategoryId = @CategoryId;
END;
GO

-- Update
CREATE PROCEDURE spUpdateCategory
    @CategoryId INT,
    @CategoryName NVARCHAR(100),
    @Description NVARCHAR(255)
AS
BEGIN
    UPDATE tbl_category
    SET CategoryName = @CategoryName,
        Description = @Description
    WHERE CategoryId = @CategoryId;
END;
GO

-- Delete
CREATE PROCEDURE spDeleteCategory
    @CategoryId INT
AS
BEGIN
    DELETE FROM tbl_category WHERE CategoryId = @CategoryId;
END;
GO


---

‚öôÔ∏è 2. ASP.NET Core MVC Project Setup

Run in terminal:

dotnet new mvc -n CategoryCRUDApp
cd CategoryCRUDApp

Add connection string in appsettings.json:

"ConnectionStrings": {
  "DefaultConnection": "Server=YOUR_SERVER_NAME;Database=YourDatabase;Trusted_Connection=True;TrustServerCertificate=True;"
}


---

üìò 3. Create Model

Models/Category.cs

namespace CategoryCRUDApp.Models
{
    public class Category
    {
        public int CategoryId { get; set; }
        public string CategoryName { get; set; } = string.Empty;
        public string? Description { get; set; }
    }
}


---

üíæ 4. Create Data Access Layer (DAL)

Data/CategoryDAL.cs

using System.Data;
using System.Data.SqlClient;
using CategoryCRUDApp.Models;
using Microsoft.Extensions.Configuration;

namespace CategoryCRUDApp.Data
{
    public class CategoryDAL
    {
        private readonly string _connectionString;

        public CategoryDAL(IConfiguration configuration)
        {
            _connectionString = configuration.GetConnectionString("DefaultConnection");
        }

        public List<Category> GetAll()
        {
            List<Category> list = new();
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spGetAllCategories", con);
                cmd.CommandType = CommandType.StoredProcedure;
                con.Open();
                SqlDataReader dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    list.Add(new Category
                    {
                        CategoryId = Convert.ToInt32(dr["CategoryId"]),
                        CategoryName = dr["CategoryName"].ToString() ?? "",
                        Description = dr["Description"].ToString()
                    });
                }
            }
            return list;
        }

        public Category GetById(int id)
        {
            Category cat = new();
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spGetCategoryById", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryId", id);
                con.Open();
                SqlDataReader dr = cmd.ExecuteReader();
                if (dr.Read())
                {
                    cat.CategoryId = Convert.ToInt32(dr["CategoryId"]);
                    cat.CategoryName = dr["CategoryName"].ToString() ?? "";
                    cat.Description = dr["Description"].ToString();
                }
            }
            return cat;
        }

        public void Add(Category category)
        {
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spAddCategory", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryName", category.CategoryName);
                cmd.Parameters.AddWithValue("@Description", category.Description ?? (object)DBNull.Value);
                con.Open();
                cmd.ExecuteNonQuery();
            }
        }

        public void Update(Category category)
        {
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spUpdateCategory", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryId", category.CategoryId);
                cmd.Parameters.AddWithValue("@CategoryName", category.CategoryName);
                cmd.Parameters.AddWithValue("@Description", category.Description ?? (object)DBNull.Value);
                con.Open();
                cmd.ExecuteNonQuery();
            }
        }

        public void Delete(int id)
        {
            using (SqlConnection con = new(_connectionString))
            {
                SqlCommand cmd = new("spDeleteCategory", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@CategoryId", id);
                con.Open();
                cmd.ExecuteNonQuery();
            }
        }
    }
}


---

üéÆ 5. Create Controller

Controllers/CategoryController.cs

using Microsoft.AspNetCore.Mvc;
using CategoryCRUDApp.Data;
using CategoryCRUDApp.Models;

namespace CategoryCRUDApp.Controllers
{
    public class CategoryController : Controller
    {
        private readonly CategoryDAL _categoryDAL;

        public CategoryController(IConfiguration configuration)
        {
            _categoryDAL = new CategoryDAL(configuration);
        }

        public IActionResult Index()
        {
            var list = _categoryDAL.GetAll();
            return View(list);
        }

        public IActionResult Details(int id)
        {
            var cat = _categoryDAL.GetById(id);
            return View(cat);
        }

        public IActionResult Create()
        {
            return View();
        }

        [HttpPost]
        public IActionResult Create(Category category)
        {
            if (ModelState.IsValid)
            {
                _categoryDAL.Add(category);
                return RedirectToAction(nameof(Index));
            }
            return View(category);
        }

        public IActionResult Edit(int id)
        {
            var cat = _categoryDAL.GetById(id);
            return View(cat);
        }

        [HttpPost]
        public IActionResult Edit(Category category)
        {
            if (ModelState.IsValid)
            {
                _categoryDAL.Update(category);
                return RedirectToAction(nameof(Index));
            }
            return View(category);
        }

        public IActionResult Delete(int id)
        {
            var cat = _categoryDAL.GetById(id);
            return View(cat);
        }

        [HttpPost, ActionName("Delete")]
        public IActionResult DeleteConfirmed(int id)
        {
            _categoryDAL.Delete(id);
            return RedirectToAction(nameof(Index));
        }
    }
}


---

üé® 6. Create Views

Create a folder:
Views/Category/

Then add the following Razor Views:

üü¢ Index.cshtml

@model IEnumerable<CategoryCRUDApp.Models.Category>

<h2>Category List</h2>
<p>
    <a class="btn btn-primary" asp-action="Create">Add New</a>
</p>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Category Name</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.CategoryId</td>
                <td>@item.CategoryName</td>
                <td>@item.Description</td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.CategoryId">Edit</a> |
                    <a asp-action="Details" asp-route-id="@item.CategoryId">Details</a> |
                    <a asp-action="Delete" asp-route-id="@item.CategoryId">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>

üü¢ Create.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Add New Category</h2>

<form asp-action="Create" method="post">
    <div class="form-group">
        <label>Category Name</label>
        <input asp-for="CategoryName" class="form-control" />
    </div>
    <div class="form-group">
        <label>Description</label>
        <input asp-for="Description" class="form-control" />
    </div>
    <br />
    <button type="submit" class="btn btn-success">Save</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>

üü¢ Edit.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Edit Category</h2>

<form asp-action="Edit" method="post">
    <input type="hidden" asp-for="CategoryId" />
    <div class="form-group">
        <label>Category Name</label>
        <input asp-for="CategoryName" class="form-control" />
    </div>
    <div class="form-group">
        <label>Description</label>
        <input asp-for="Description" class="form-control" />
    </div>
    <br />
    <button type="submit" class="btn btn-primary">Update</button>
    <a asp-action="Index" class="btn btn-secondary">Back</a>
</form>

üü¢ Details.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Category Details</h2>

<dl class="row">
    <dt class="col-sm-2">ID</dt>
    <dd class="col-sm-10">@Model.CategoryId</dd>

    <dt class="col-sm-2">Name</dt>
    <dd class="col-sm-10">@Model.CategoryName</dd>

    <dt class="col-sm-2">Description</dt>
    <dd class="col-sm-10">@Model.Description</dd>
</dl>

<a asp-action="Edit" asp-route-id="@Model.CategoryId" class="btn btn-primary">Edit</a>
<a asp-action="Index" class="btn btn-secondary">Back</a>

üü¢ Delete.cshtml

@model CategoryCRUDApp.Models.Category

<h2>Delete Category</h2>

<h4>Are you sure you want to delete this category?</h4>
<div>
    <h5>@Model.CategoryName</h5>
    <p>@Model.Description</p>
</div>

<form asp-action="Delete">
    <input type="hidden" asp-for="CategoryId" />
    <button type="submit" class="btn btn-danger">Delete</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>


---

üöÄ 7. Run the App

dotnet run

Then open in browser:
üëâ https://localhost:5001/Category

You‚Äôll have a fully functional CRUD system using stored procedures in SQL Server.


---

Would you like me to enhance it with Bootstrap + DataTables UI (search/sort/paging) next?
