Thatâ€™s a great project â€” and youâ€™re already thinking in the right modular direction ğŸ‘
Letâ€™s build a clear logic flow and database concept for your IT Items Inventory Management System with three main modules: IN, TRANSFER, and DISPOSE/REPLACE.


---

ğŸ§  OVERALL SYSTEM FLOW

Main goal: Manage IT items efficiently from entry (IN) â†’ movement (TRANSFER) â†’ end-of-life or replacement (DISPOSE/REPLACE), while tracking their location, status, and details via QR code.


---

ğŸ—‚ MODULE 1: IN (Item Receiving & QR Generation)

ğŸ”¹ Purpose

To record newly received items in the system, grouped by category, and generate a unique Control No and QR Code per item for tracking.

ğŸ”¹ Process Logic

1. User scans/selects Category
â†’ e.g., Laptop, Printer, Router, etc.


2. System auto-generates Control No

Format: CAT-YYYYMMDD-#### (e.g., LAP-20251017-0001)


3. User scans or inputs:

Serial Number

Location (via QR or dropdown)

Brand / Model

Quantity or Length (manual input for cables, etc.)



4. System saves item details to Tbl_Items with status = "Active" or "In Storage"


5. System generates QR code per item containing:

Control No | Category | Serial No | Location | Brand/Model | Status


6. User prints QR label to attach to the item.



ğŸ”¹ Example Table: Tbl_Items

Field	Description

ItemID (PK)	Auto-generated
ControlNo	Unique system-generated ID
Category	e.g., Laptop
SerialNo	From user input
Brand	e.g., Dell
Model	e.g., Inspiron 15
Quantity	1 (or length if cable)
Location	IT Storage, Office, etc.
Status	Active / Transferred / Disposed / Replaced
DateAdded	Timestamp
QRCodePath	File path of QR image



---

ğŸšš MODULE 2: TRANSFER (Item Movement)

ğŸ”¹ Purpose

To track item movements between locations and maintain updated status and audit trail.

ğŸ”¹ Process Logic

1. User scans itemâ€™s QR code
â†’ System fetches item details.


2. User selects new location
â†’ e.g., from â€œIT Storageâ€ to â€œAdmin Officeâ€.


3. System updates:

Tbl_Items.Location â†’ new location

Logs transfer to Tbl_Transfers



4. System sets status = "Transferred"


5. User can generate Transfer Report



ğŸ”¹ Example Table: Tbl_Transfers

Field	Description

TransferID (PK)	Auto-generated
ControlNo	FK from Tbl_Items
FromLocation	Old location
ToLocation	New location
TransferBy	User performing transfer
TransferDate	Timestamp



---

ğŸ—‘ MODULE 3: DISPOSE / REPLACE

ğŸ”¹ Purpose

To handle end-of-life or defective items, with two paths:

Dispose â†’ permanently removed

Replace â†’ returned and replaced by supplier



---

ğŸ”¹ Process Logic

Option A: Dispose

1. User scans itemâ€™s QR code


2. Selects â€œDisposeâ€ reason


3. System updates:

Tbl_Items.Status = "Disposed"

Records to Tbl_Disposals



4. Item becomes non-transferable and removed from active inventory.



Option B: Replace

1. User scans defective itemâ€™s QR code


2. Selects â€œReplaceâ€ option


3. System updates:

Tbl_Items.Status = "Replaced"

Creates new entry in Tbl_Items for the replacement item

Links old and new item in Tbl_Replacements



4. Generates new Control No + QR Code for the new item.




---

ğŸ”¹ Example Tables

Tbl_Disposals

Field	Description

DisposeID	Auto-generated
ControlNo	FK from Tbl_Items
Reason	e.g., Broken screen
DisposeBy	User who processed
DisposeDate	Timestamp


Tbl_Replacements

Field	Description

ReplaceID	Auto-generated
OldControlNo	FK (replaced item)
NewControlNo	FK (new item)
Supplier	e.g., Dell PH
ReplaceDate	Timestamp



---

ğŸ“Š Optional Supporting Tables

Tbl_Category â€“ master list of item categories

Tbl_Location â€“ list of all item storage/deployment locations

Tbl_User â€“ system users (for audit trail)



---

ğŸ” Status Lifecycle Summary

Action	Old Status	New Status

In	(none)	Active
Transfer	Active	Transferred
Dispose	Active/Transferred	Disposed
Replace	Active/Transferred	Replaced (new item becomes Active)



---

ğŸ§¾ Example QR Code Content

Control No: LAP-20251017-0001
Category: Laptop
Serial No: SN123456
Brand: Dell
Model: Inspiron 15
Location: Admin Office
Status: Active


---

Would you like me to help you translate this logic into a database design (ERD + SQL table creation script) or flowchart (for documentation) next?


-- 

1013

Perfect ğŸ‘ â€” letâ€™s build your IT Items Inventory Management System logic into a Database Design (ERD) and SQL Table Creation Script, with full explanations so you can easily implement it later (for example, in SQL Server or MySQL).


---

ğŸ§  SYSTEM SUMMARY

Your system has three main modules:

1. IN â†’ Record new items, assign control numbers, generate QR codes.


2. TRANSFER â†’ Move items to different locations.


3. DISPOSE / REPLACE â†’ Manage defective or end-of-life items.



We'll design the database to support those processes.


---

ğŸ§© ENTITY RELATIONSHIP DIAGRAM (ERD)

Hereâ€™s the conceptual layout (explained below):

Tbl_Category      Tbl_Location        Tbl_User
     â”‚                  â”‚                 â”‚
     â”‚                  â”‚                 â”‚
     â–¼                  â–¼                 â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚     Tbl_Items      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                 â–¼                  â–¼
 Tbl_Transfers     Tbl_Disposals       Tbl_Replacements


---

ğŸ“˜ DATABASE TABLES AND EXPLANATION


---

1ï¸âƒ£ Tbl_Category

Stores all item types.

CREATE TABLE Tbl_Category (
    CategoryID INT IDENTITY(1,1) PRIMARY KEY,
    CategoryName NVARCHAR(100) NOT NULL
);

âœ… Purpose:

Used in â€œINâ€ module when scanning category.

Keeps category names consistent.


ğŸ§© Example Data:

CategoryID	CategoryName

1	Laptop
2	Printer
3	Network Device



---

2ï¸âƒ£ Tbl_Location

Stores all registered locations where items may be stored or assigned.

CREATE TABLE Tbl_Location (
    LocationID INT IDENTITY(1,1) PRIMARY KEY,
    LocationName NVARCHAR(100) NOT NULL
);

âœ… Purpose:

Used in â€œINâ€ and â€œTRANSFERâ€ modules.


ğŸ§© Example Data:

LocationID	LocationName

1	IT Storage
2	Admin Office
3	HR Department



---

3ï¸âƒ£ Tbl_User

System users who perform actions.

CREATE TABLE Tbl_User (
    UserID INT IDENTITY(1,1) PRIMARY KEY,
    FullName NVARCHAR(100) NOT NULL,
    Username NVARCHAR(50) NOT NULL UNIQUE,
    PasswordHash NVARCHAR(255) NOT NULL,
    Role NVARCHAR(50) CHECK (Role IN ('Admin','Encoder','Viewer')),
    CreatedDate DATETIME DEFAULT GETDATE()
);

âœ… Purpose:

For audit trail (who performed IN, TRANSFER, or DISPOSE actions).



---

4ï¸âƒ£ Tbl_Items

Main table holding all item details.

CREATE TABLE Tbl_Items (
    ItemID INT IDENTITY(1,1) PRIMARY KEY,
    ControlNo NVARCHAR(50) UNIQUE NOT NULL,
    CategoryID INT NOT NULL FOREIGN KEY REFERENCES Tbl_Category(CategoryID),
    SerialNo NVARCHAR(100),
    Brand NVARCHAR(100),
    Model NVARCHAR(100),
    Quantity DECIMAL(10,2) DEFAULT 1,
    LocationID INT FOREIGN KEY REFERENCES Tbl_Location(LocationID),
    Status NVARCHAR(50) CHECK (Status IN ('Active','Transferred','Disposed','Replaced')),
    DateAdded DATETIME DEFAULT GETDATE(),
    QRCodePath NVARCHAR(255)
);

âœ… Purpose:

Core inventory table.

QR code generated from this data.


ğŸ§© Example Data:

ControlNo	CategoryID	SerialNo	LocationID	Status

LAP-20251017-0001	1	SN12345	1	Active



---

5ï¸âƒ£ Tbl_Transfers

Tracks item movements between locations.

CREATE TABLE Tbl_Transfers (
    TransferID INT IDENTITY(1,1) PRIMARY KEY,
    ControlNo NVARCHAR(50) NOT NULL,
    FromLocationID INT FOREIGN KEY REFERENCES Tbl_Location(LocationID),
    ToLocationID INT FOREIGN KEY REFERENCES Tbl_Location(LocationID),
    TransferBy INT FOREIGN KEY REFERENCES Tbl_User(UserID),
    TransferDate DATETIME DEFAULT GETDATE(),
    Remarks NVARCHAR(255)
);

âœ… Purpose:

Keeps audit trail of all transfers.

Updates current LocationID in Tbl_Items after each transfer.


ğŸ§© Example Data:

ControlNo	From	To	TransferBy	Date

LAP-20251017-0001	1	2	3	2025-10-18



---

6ï¸âƒ£ Tbl_Disposals

Tracks disposed items.

CREATE TABLE Tbl_Disposals (
    DisposeID INT IDENTITY(1,1) PRIMARY KEY,
    ControlNo NVARCHAR(50) NOT NULL,
    Reason NVARCHAR(255),
    DisposeBy INT FOREIGN KEY REFERENCES Tbl_User(UserID),
    DisposeDate DATETIME DEFAULT GETDATE()
);

âœ… Purpose:

Keeps record of items that are no longer usable.

Sets Tbl_Items.Status = 'Disposed'.


ğŸ§© Example Data:

ControlNo	Reason	DisposeBy	DisposeDate

LAP-20251017-0001	Broken screen	2	2025-10-20



---

7ï¸âƒ£ Tbl_Replacements

Tracks items that were replaced by supplier.

CREATE TABLE Tbl_Replacements (
    ReplaceID INT IDENTITY(1,1) PRIMARY KEY,
    OldControlNo NVARCHAR(50) NOT NULL,
    NewControlNo NVARCHAR(50) NOT NULL,
    Supplier NVARCHAR(100),
    ReplaceDate DATETIME DEFAULT GETDATE()
);

âœ… Purpose:

Links old and new item records.

New item will have its own Control No and QR code.


ğŸ§© Example Data:

OldControlNo	NewControlNo	Supplier	ReplaceDate

LAP-20251017-0001	LAP-20251025-0002	Dell PH	2025-10-25



---

ğŸ”„ SYSTEM LOGIC FLOW (Step-by-Step)

ğŸŸ¢ IN MODULE

1. User scans/selects category.


2. System generates ControlNo.


3. User inputs serial no, brand, model, location, etc.


4. Data saved in Tbl_Items.


5. QR Code generated and printed.




---

ğŸ”µ TRANSFER MODULE

1. User scans itemâ€™s QR code.


2. System fetches item details.


3. User selects new location.


4. System:

Inserts new record into Tbl_Transfers

Updates Tbl_Items.LocationID

Sets status to â€œTransferredâ€.





---

ğŸ”´ DISPOSE MODULE

1. User scans QR code.


2. Selects Dispose reason.


3. System:

Inserts into Tbl_Disposals

Updates Tbl_Items.Status = 'Disposed'.





---

ğŸŸ  REPLACE MODULE

1. User scans defective item QR.


2. Selects Replace option.


3. System:

Inserts into Tbl_Replacements (old â†” new)

Updates Tbl_Items.Status = 'Replaced' for old item

Creates new record in Tbl_Items for replacement (with new Control No + QR).





---

ğŸ§¾ STATUS FLOW SUMMARY

Stage	Table Affected	Status

Item Added	Tbl_Items	Active
Transferred	Tbl_Items / Tbl_Transfers	Transferred
Disposed	Tbl_Items / Tbl_Disposals	Disposed
Replaced	Tbl_Items / Tbl_Replacements	Replaced (new item â†’ Active)



---

ğŸ’¡ BONUS: QR CODE CONTENT FORMAT

Each QR code printed may encode:

Control No: LAP-20251017-0001
Category: Laptop
Serial No: SN12345
Brand: Dell
Model: Inspiron 15
Location: Admin Office
Status: Active

When scanned, system retrieves record from Tbl_Items by ControlNo.


---

Would you like me to draw this ERD as a diagram (image form) so you can include it in your documentation or proposal next?


-- 1014

Excellent question ğŸ‘ â€” thatâ€™s one of the most important parts of your IT Items Inventory Management System â€” getting stock counts per category.

Letâ€™s go step-by-step and make it clear.


---

ğŸ¯ GOAL

You want to get the total stocks of each category (e.g., how many Laptops, Printers, Routers, etc.)
only counting active items (not disposed or replaced).


---

ğŸ§© STEP 1: Understanding What "Stock" Means

In your system:

Each record in Tbl_Items represents one item (or a quantity entry).

Some items are disposed or replaced, so they should not be counted as available stock.

You may also want to filter by location or overall total.



---

âš™ï¸ STEP 2: Basic SQL Query â€” Total Stock per Category

Hereâ€™s the SQL command to get total stocks per category:

SELECT 
    c.CategoryName,
    SUM(i.Quantity) AS TotalStock
FROM 
    Tbl_Items i
JOIN 
    Tbl_Category c ON i.CategoryID = c.CategoryID
WHERE 
    i.Status = 'Active'
GROUP BY 
    c.CategoryName
ORDER BY 
    c.CategoryName;

âœ… Explanation:

JOIN connects items with their category names.

WHERE i.Status = 'Active' ensures we count only usable items.

SUM(i.Quantity) adds up the quantities per category.

GROUP BY groups by category to show per-type totals.


ğŸ§© Example Output:

CategoryName	TotalStock

Laptop	12
Printer	5
Network Device	9



---

ğŸ·ï¸ STEP 3: Stock per Category and Location (optional)

If you want to see how many items per category in each location, use:

SELECT 
    c.CategoryName,
    l.LocationName,
    SUM(i.Quantity) AS TotalStock
FROM 
    Tbl_Items i
JOIN 
    Tbl_Category c ON i.CategoryID = c.CategoryID
JOIN 
    Tbl_Location l ON i.LocationID = l.LocationID
WHERE 
    i.Status = 'Active'
GROUP BY 
    c.CategoryName, l.LocationName
ORDER BY 
    c.CategoryName, l.LocationName;

ğŸ§© Example Output:

CategoryName	LocationName	TotalStock

Laptop	IT Storage	5
Laptop	Admin Office	7
Printer	HR Department	3



---

ğŸ§® STEP 4: Counting All Stocks in System (Optional Total Summary)

To get one total across all categories:

SELECT SUM(Quantity) AS TotalActiveStock
FROM Tbl_Items
WHERE Status = 'Active';


---

ğŸš« STEP 5: If You Want to Include Disposed / Replaced Items (Full Report)

You can include all statuses and show breakdowns:

SELECT 
    c.CategoryName,
    i.Status,
    COUNT(i.ItemID) AS ItemCount,
    SUM(i.Quantity) AS TotalQty
FROM 
    Tbl_Items i
JOIN 
    Tbl_Category c ON i.CategoryID = c.CategoryID
GROUP BY 
    c.CategoryName, i.Status
ORDER BY 
    c.CategoryName, i.Status;

ğŸ§© Example Output:

CategoryName	Status	ItemCount	TotalQty

Laptop	Active	10	10
Laptop	Transferred	3	3
Laptop	Disposed	2	2
Printer	Active	5	5



---

ğŸ’¡ Optional Enhancements

You can add a stored procedure or view for reuse.

âœ… Example View:

CREATE VIEW vw_CategoryStock AS
SELECT 
    c.CategoryName,
    SUM(i.Quantity) AS TotalStock
FROM 
    Tbl_Items i
JOIN 
    Tbl_Category c ON i.CategoryID = c.CategoryID
WHERE 
    i.Status = 'Active'
GROUP BY 
    c.CategoryName;

Then simply:

SELECT * FROM vw_CategoryStock;


---

ğŸ§¾ Summary

Goal	SQL Method

Stock per category	GROUP BY CategoryName
Stock per category & location	GROUP BY CategoryName, LocationName
Overall total	SUM(Quantity)
Include disposed/replaced	GROUP BY CategoryName, Status
Reusable summary	Create VIEW or stored procedure



---

Would you like me to show how to create a stored procedure (so you can call it easily from your app, e.g., EXEC GetCategoryStock 'Active')?


-- 1100

Excellent question ğŸ‘ â€” youâ€™re thinking about multi-location item tracking, which is a key feature in any inventory management system.

Letâ€™s walk through exactly how this works in your design â€” both logically and in database behavior â€” for your example:

> ğŸ”„ Item transferred from Location A â†’ B, then B â†’ C after a month.




---

ğŸ§  THE CONCEPT: Item Movement History

You want to retain the complete movement trail of each item while always knowing the current location.

Weâ€™ll use two tables together:

1. Tbl_Items â†’ stores current location and status.


2. Tbl_Transfers â†’ stores all transfer history records.




---

ğŸ”¹ STEP-BY-STEP LOGIC FLOW

ğŸ“¦ Initial (IN Module)

Item is first added to inventory in Location A.


INSERT INTO Tbl_Items
(ControlNo, CategoryID, SerialNo, Brand, Model, Quantity, LocationID, Status)
VALUES ('LAP-20251017-0001', 1, 'SN12345', 'Dell', 'Inspiron 15', 1, 1, 'Active');

> ğŸ“ LocationID = 1 (Location A)




---

ğŸšš First Transfer (A â†’ B)

When the item moves from Location A to B:

1. Insert transfer record:



INSERT INTO Tbl_Transfers
(ControlNo, FromLocationID, ToLocationID, TransferBy)
VALUES ('LAP-20251017-0001', 1, 2, 5);

2. Update itemâ€™s current location:



UPDATE Tbl_Items
SET LocationID = 2, Status = 'Transferred'
WHERE ControlNo = 'LAP-20251017-0001';

âœ… Now the itemâ€™s current location = B.
âœ… But we keep the record of A â†’ B in Tbl_Transfers.


---

ğŸš› Second Transfer (B â†’ C, after a month)

After one month, the same process repeats:

1. Insert new transfer record:



INSERT INTO Tbl_Transfers
(ControlNo, FromLocationID, ToLocationID, TransferBy)
VALUES ('LAP-20251017-0001', 2, 3, 5);

2. Update itemâ€™s location again:



UPDATE Tbl_Items
SET LocationID = 3, Status = 'Transferred'
WHERE ControlNo = 'LAP-20251017-0001';

âœ… Now the itemâ€™s current location = C.
âœ… You now have two transfer history records:

A â†’ B

B â†’ C



---

ğŸ“‹ Example Transfer History Table

TransferID	ControlNo	FromLocationID	ToLocationID	TransferDate	TransferBy

1	LAP-20251017-0001	1	2	2025-10-17	5
2	LAP-20251017-0001	2	3	2025-11-17	5



---

ğŸ” To View the Itemâ€™s Transfer History

You can use a SQL query like this:

SELECT 
    t.TransferID,
    i.ControlNo,
    l1.LocationName AS FromLocation,
    l2.LocationName AS ToLocation,
    t.TransferDate,
    u.FullName AS TransferredBy
FROM Tbl_Transfers t
JOIN Tbl_Items i ON t.ControlNo = i.ControlNo
JOIN Tbl_Location l1 ON t.FromLocationID = l1.LocationID
JOIN Tbl_Location l2 ON t.ToLocationID = l2.LocationID
JOIN Tbl_User u ON t.TransferBy = u.UserID
WHERE t.ControlNo = 'LAP-20251017-0001'
ORDER BY t.TransferDate;

ğŸ§© Example Output:

TransferID	ControlNo	FromLocation	ToLocation	TransferDate	TransferredBy

1	LAP-20251017-0001	IT Storage	Admin Office	2025-10-17	John Dela Cruz
2	LAP-20251017-0001	Admin Office	HR Dept	2025-11-17	John Dela Cruz



---

ğŸ“Š To Get the Current Location of Any Item

You can simply read it from Tbl_Items:

SELECT 
    i.ControlNo,
    c.CategoryName,
    l.LocationName AS CurrentLocation,
    i.Status
FROM Tbl_Items i
JOIN Tbl_Category c ON i.CategoryID = c.CategoryID
JOIN Tbl_Location l ON i.LocationID = l.LocationID
WHERE i.ControlNo = 'LAP-20251017-0001';

ğŸ§© Output:

ControlNo	CategoryName	CurrentLocation	Status

LAP-20251017-0001	Laptop	HR Dept	Transferred



---

âš™ï¸ Summary of Logic

Step	Table	Action	Result

Add new item	Tbl_Items	Insert	Location = A
Transfer Aâ†’B	Tbl_Transfers	Insert	Item Location updated to B
Transfer Bâ†’C	Tbl_Transfers	Insert	Item Location updated to C
View History	Tbl_Transfers	Select	See full movement chain
View Current	Tbl_Items	Select	Shows latest location only



---

âœ… Optional Improvement (if you want automation)

You can create a Stored Procedure for transfer so you donâ€™t have to run two SQL statements every time:

CREATE PROCEDURE TransferItem
    @ControlNo NVARCHAR(50),
    @FromLocationID INT,
    @ToLocationID INT,
    @TransferBy INT
AS
BEGIN
    INSERT INTO Tbl_Transfers (ControlNo, FromLocationID, ToLocationID, TransferBy)
    VALUES (@ControlNo, @FromLocationID, @ToLocationID, @TransferBy);

    UPDATE Tbl_Items
    SET LocationID = @ToLocationID, Status = 'Transferred'
    WHERE ControlNo = @ControlNo;
END;

Then call it like:

EXEC TransferItem 'LAP-20251017-0001', 2, 3, 5;


---

Would you like me to show you a flowchart diagram of this multi-location transfer logic (for documentation or presentation)?


-- 0208

Perfect question ğŸ’¡ â€” this is an important case because cables, wires, and similar consumables are not managed per piece, but by length or box quantity.

Letâ€™s build logic that supports UOM (Unit of Measure) and Length/Quantity Tracking, so your system can handle both per-item assets (like laptops) and consumable items (like cables).


---

ğŸ¯ GOAL

When an IT item like a cable is received:

The category = â€œCableâ€

The UOM = â€œBoxâ€ (or â€œMeterâ€, depending on your setup)

The Length = 300m

You should be able to:

Track total remaining length (stock balance)

Deduct length when used/transferred

Generate a QR code per box




---

ğŸ§© STEP 1: Modify Tbl_Items to Support UOM and Length

Weâ€™ll add fields for UOM and LengthRemaining.

ALTER TABLE Tbl_Items
ADD 
    UOM NVARCHAR(50) NULL,           -- e.g., 'Box', 'Meter', 'Piece'
    TotalLength DECIMAL(10,2) NULL,  -- e.g., 300.00 meters per box
    LengthRemaining DECIMAL(10,2) NULL;  -- for tracking remaining cable


---

ğŸ“¦ Example Entry (IN Module)

When the user inputs the item:

Field	Value

ControlNo	CAB-20251017-0001
Category	Cable
Brand	D-Link
Model	Cat6
UOM	Box
TotalLength	300.00
LengthRemaining	300.00
Location	IT Storage
Status	Active


âœ… System generates QR code that contains:

Control No: CAB-20251017-0001
Category: Cable
UOM: Box
Total Length: 300m
Location: IT Storage
Status: Active


---

ğŸ”„ STEP 2: Handling Partial Transfers (e.g., 100m to another location)

When transferring a portion of the cable (not the whole box):

Option A â€” Create a Transfer Record with a Length Field

Youâ€™ll modify your Tbl_Transfers to include a TransferLength column:

ALTER TABLE Tbl_Transfers
ADD TransferLength DECIMAL(10,2) NULL; -- e.g., 100.00m

Then each transfer can record how many meters were moved.

Example Transfer

ControlNo	FromLocation	ToLocation	TransferLength	TransferDate

CAB-20251017-0001	IT Storage	Server Room	100.00	2025-10-18



---

âš™ï¸ STEP 3: Update Stock (LengthRemaining)

When you record a transfer, the system should automatically adjust the stock:

SQL Logic Example

UPDATE Tbl_Items
SET LengthRemaining = LengthRemaining - 100.00
WHERE ControlNo = 'CAB-20251017-0001';

If you also want to track the new â€œpartialâ€ cable at the new location, you can insert a child record for that portion:

INSERT INTO Tbl_Items
(ControlNo, CategoryID, Brand, Model, UOM, TotalLength, LengthRemaining, LocationID, Status)
VALUES ('CAB-20251017-0001A', 3, 'D-Link', 'Cat6', 'Meter', 100.00, 100.00, 4, 'Active');

ğŸ§© Now you have:

ControlNo	Location	LengthRemaining	Status

CAB-20251017-0001	IT Storage	200.00	Active
CAB-20251017-0001A	Server Room	100.00	Active



---

ğŸ§® STEP 4: Stock Computation for Cables

To get total remaining cable length per category, you can query:

SELECT 
    c.CategoryName,
    SUM(i.LengthRemaining) AS TotalLengthRemaining
FROM Tbl_Items i
JOIN Tbl_Category c ON i.CategoryID = c.CategoryID
WHERE i.Status = 'Active' AND c.CategoryName = 'Cable'
GROUP BY c.CategoryName;

ğŸ§© Output:

CategoryName	TotalLengthRemaining

Cable	300.00



---

ğŸ“Š STEP 5: Stock Computation by Location

If you want to see where each cable portion is stored:

SELECT 
    c.CategoryName,
    l.LocationName,
    SUM(i.LengthRemaining) AS TotalLengthRemaining
FROM Tbl_Items i
JOIN Tbl_Category c ON i.CategoryID = c.CategoryID
JOIN Tbl_Location l ON i.LocationID = l.LocationID
WHERE c.CategoryName = 'Cable' AND i.Status = 'Active'
GROUP BY c.CategoryName, l.LocationName;

ğŸ§© Output Example:

CategoryName	LocationName	TotalLengthRemaining

Cable	IT Storage	200.00
Cable	Server Room	100.00



---

âš™ï¸ STEP 6: Optional Stored Procedure (for partial cable transfer)

You can automate this logic with a stored procedure:

CREATE PROCEDURE TransferCableLength
    @ControlNo NVARCHAR(50),
    @FromLocationID INT,
    @ToLocationID INT,
    @TransferBy INT,
    @TransferLength DECIMAL(10,2)
AS
BEGIN
    DECLARE @Remaining DECIMAL(10,2);

    SELECT @Remaining = LengthRemaining FROM Tbl_Items WHERE ControlNo = @ControlNo;

    IF @Remaining >= @TransferLength
    BEGIN
        -- Log transfer
        INSERT INTO Tbl_Transfers (ControlNo, FromLocationID, ToLocationID, TransferBy, TransferLength)
        VALUES (@ControlNo, @FromLocationID, @ToLocationID, @TransferBy, @TransferLength);

        -- Deduct from original
        UPDATE Tbl_Items
        SET LengthRemaining = LengthRemaining - @TransferLength
        WHERE ControlNo = @ControlNo;

        -- Add new partial item entry
        DECLARE @CategoryID INT, @Brand NVARCHAR(100), @Model NVARCHAR(100), @UOM NVARCHAR(50);
        SELECT @CategoryID = CategoryID, @Brand = Brand, @Model = Model, @UOM = UOM
        FROM Tbl_Items WHERE ControlNo = @ControlNo;

        INSERT INTO Tbl_Items (ControlNo, CategoryID, Brand, Model, UOM, TotalLength, LengthRemaining, LocationID, Status)
        VALUES (CONCAT(@ControlNo, '-', CAST(@ToLocationID AS NVARCHAR)), @CategoryID, @Brand, @Model, @UOM, @TransferLength, @TransferLength, @ToLocationID, 'Active');
    END
END;

Then you can call:

EXEC TransferCableLength 'CAB-20251017-0001', 1, 2, 5, 100.00;


---

âœ… SUMMARY

Scenario	Behavior

Receive cable (300m per box)	Add TotalLength = LengthRemaining = 300
Transfer 100m	Deduct 100m from main item, create new item (100m) in destination
View current stock	Use SUM(LengthRemaining)
Print QR per box	Include Total & Remaining length
Stock balance auto-updates	via updates or stored procedure



---

Would you like me to show a diagram or flowchart for this â€œpartial cable transferâ€ logic (so you can use it for documentation or system design)?


-- 0224

Excellent â€” youâ€™re now thinking about combined stock viewing, where each category (like Printer, PC, Cable) might have different units of measure (UOM) and stock computation logic.

Letâ€™s build a flexible SQL logic and explanation so you can view all item stocks, whether they are count-based (like laptops, printers, PCs) or length-based (like cables, wires).


---

ğŸ¯ GOAL

To display all available stocks per category, showing:

Category name

UOM (e.g., pcs, box, meter)

Stock quantity or remaining length

Optional: show by location



---

ğŸ§© 1ï¸âƒ£ Data Setup (Recap)

You already have your main table:

Tbl_Items
-----------------------------
ItemID             (int)
ControlNo          (nvarchar)
CategoryID         (int)
Brand              (nvarchar)
Model              (nvarchar)
UOM                (nvarchar)   -- 'pc', 'box', 'm'
Quantity           (decimal)    -- for pcs
TotalLength        (decimal)    -- for cables
LengthRemaining    (decimal)
LocationID         (int)
Status             (nvarchar)


---

ğŸ§® 2ï¸âƒ£ Logic: Unified Stock View Query

Hereâ€™s a smart query that shows both piece-count and meter-length stocks together:

SELECT 
    c.CategoryName,
    i.UOM,
    CASE 
        WHEN i.UOM IN ('pc','pcs','unit','box') 
             THEN SUM(i.Quantity)
        WHEN i.UOM IN ('m','meter','meters') 
             THEN SUM(i.LengthRemaining)
        ELSE SUM(i.Quantity)
    END AS TotalStock,
    l.LocationName
FROM Tbl_Items i
JOIN Tbl_Category c ON i.CategoryID = c.CategoryID
JOIN Tbl_Location l ON i.LocationID = l.LocationID
WHERE i.Status = 'Active'
GROUP BY c.CategoryName, i.UOM, l.LocationName
ORDER BY c.CategoryName, l.LocationName;


---

ğŸ§¾ Example Output

CategoryName	UOM	TotalStock	LocationName

Cable	m	250.00	IT Storage
Cable	m	50.00	Server Room
Printer	pc	5	Admin Office
PC	pc	8	HR Department



---

âœ… Explanation:

CASE chooses how to calculate stock:

For count-based items (Printer, PC, Laptop): uses SUM(Quantity)

For length-based items (Cable): uses SUM(LengthRemaining)


GROUP BY lets you see per category, UOM, and location.

WHERE i.Status = 'Active' filters out disposed/replaced items.



---

ğŸ“Š 3ï¸âƒ£ If You Want a General Summary per Category (No Location Breakdown)

You can simplify the query:

SELECT 
    c.CategoryName,
    i.UOM,
    CASE 
        WHEN i.UOM IN ('pc','pcs','unit','box') 
             THEN SUM(i.Quantity)
        WHEN i.UOM IN ('m','meter','meters') 
             THEN SUM(i.LengthRemaining)
        ELSE SUM(i.Quantity)
    END AS TotalStock
FROM Tbl_Items i
JOIN Tbl_Category c ON i.CategoryID = c.CategoryID
WHERE i.Status = 'Active'
GROUP BY c.CategoryName, i.UOM
ORDER BY c.CategoryName;

ğŸ§© Output:

CategoryName	UOM	TotalStock

Cable	m	300.00
Printer	pc	5
PC	pc	8



---

ğŸ§® 4ï¸âƒ£ Optional: Create a Reusable View

To make this report easy to access from your app, create a SQL view:

CREATE VIEW vw_ItemStocks AS
SELECT 
    c.CategoryName,
    i.UOM,
    CASE 
        WHEN i.UOM IN ('pc','pcs','unit','box') 
             THEN SUM(i.Quantity)
        WHEN i.UOM IN ('m','meter','meters') 
             THEN SUM(i.LengthRemaining)
        ELSE SUM(i.Quantity)
    END AS TotalStock,
    l.LocationName
FROM Tbl_Items i
JOIN Tbl_Category c ON i.CategoryID = c.CategoryID
JOIN Tbl_Location l ON i.LocationID = l.LocationID
WHERE i.Status = 'Active'
GROUP BY c.CategoryName, i.UOM, l.LocationName;

Then you can simply run:

SELECT * FROM vw_ItemStocks;


---

ğŸ§¾ 5ï¸âƒ£ Optional: Total All Stocks (summary row)

To get an overall total (all categories combined), you can add a ROLLUP grouping:

SELECT 
    COALESCE(c.CategoryName, 'ALL CATEGORIES') AS CategoryName,
    i.UOM,
    CASE 
        WHEN i.UOM IN ('pc','pcs','unit','box') 
             THEN SUM(i.Quantity)
        WHEN i.UOM IN ('m','meter','meters') 
             THEN SUM(i.LengthRemaining)
        ELSE SUM(i.Quantity)
    END AS TotalStock
FROM Tbl_Items i
JOIN Tbl_Category c ON i.CategoryID = c.CategoryID
WHERE i.Status = 'Active'
GROUP BY ROLLUP (c.CategoryName, i.UOM);

ğŸ§© Output Example:

CategoryName	UOM	TotalStock

Cable	m	300.00
PC	pc	8
Printer	pc	5
ALL CATEGORIES	NULL	313.00



---

âœ… Summary Table

Purpose	SQL Type	Description

Stocks per category	GROUP BY CategoryName	Total stock by UOM
Stocks per category + location	Add l.LocationName	Show per-site breakdown
All categories in one report	ROLLUP	Includes totals
Easy reuse	CREATE VIEW vw_ItemStocks	Simplifies reporting



---

Would you like me to include a flowchart or dashboard mockup showing how this â€œStock Summary per Category and UOMâ€ would look visually (like a table or chart in your web app)?


-- 0345

Excellent question â€” this goes into the core logic of your inventory life cycle, especially when handling items that are transferable (like cables and boxes) versus disposable or replaceable items.

Letâ€™s break it down carefully so youâ€™ll understand how the status should behave, and why.


---

ğŸ¯ GOAL

Understand:

> If a cable (UOM = 'm') or box item is transferred to another location, should its status in Tbl_Items remain "Active", or should it change?




---

ğŸ§© 1ï¸âƒ£ Status Logic Overview

Hereâ€™s the recommended behavior for Tbl_Items.Status across your modules:

Module	Description	Item Movement	Tbl_Items.Status

IN	Item newly added to stock	Adds new record	Active
TRANSFER	Item moved from one location to another	The item stays in use, only location changes	âœ… Stay "Active"
DISPOSE	Item marked for disposal (damaged, obsolete)	Removed from usable stock	âŒ Change to "Disposed"
REPLACE	Supplier replaced old unit	Old item becomes "Replaced", new item added as new stock	âŒ Old = "Replaced", New = "Active"



---

ğŸ§  2ï¸âƒ£ Detailed Transfer Logic Example

ğŸ§© Example: Cable (UOM = â€œmâ€)

Letâ€™s say you have:

ItemID	Category	UOM	LengthRemaining	Location	Status

101	Cable	m	300	Storage	Active


Now you transfer 100 meters to another location:

Action	Result

Subtract 100 from old location	LengthRemaining = 200
Add new record (or log) for new location	New entry with 100 meters
Status of both	âœ… Both remain Active



---

âœ… After Transfer

ItemID	Category	UOM	LengthRemaining	Location	Status

101	Cable	m	200	Storage	Active
102	Cable	m	100	Office	Active


ğŸ’¡ Because both are still usable items, they remain â€œActive.â€


---

ğŸ§± 3ï¸âƒ£ Database Rule Logic

If you want this behavior automatically in SQL or code:

-- Pseudocode for Transfer Operation
IF @Module = 'Transfer'
BEGIN
    UPDATE Tbl_Items
    SET LengthRemaining = LengthRemaining - @TransferLength
    WHERE ItemID = @ItemID AND Status = 'Active';

    INSERT INTO Tbl_Items (CategoryID, UOM, LengthRemaining, LocationID, Status)
    VALUES (@CategoryID, @UOM, @TransferLength, @NewLocationID, 'Active');
END


---

ğŸ–‹ 4ï¸âƒ£ For Box-Type Items

If UOM = 'box', and you transfer the whole box, not partial:

You can update only the location (no need to split record).

The status stays â€œActive.â€


If you split (e.g., 10 boxes â†’ 5 boxes per site), then:

Update old record: Quantity = Quantity - 5

Insert new record: Quantity = 5

Both stay â€œActiveâ€.



---

ğŸ§¾ 5ï¸âƒ£ When to Change Status

Condition	Set Status to

Item physically removed or destroyed	Disposed
Item replaced by supplier	Replaced
Item active, even if moved	Active
Item on hold for repair	For Repair (optional)



---

âœ… Final Recommendation Summary

UOM Type	When Transferred	Status	Action

m (meter)	Partially or fully transferred	Active	Split or update record
box	Fully transferred	Active	Update location
pc/unit	Fully transferred	Active	Update location
Any	Disposed or replaced	Disposed / Replaced	Change status



---

ğŸ§© Example Query to Always View Only â€œUsableâ€ Stocks

SELECT * 
FROM Tbl_Items 
WHERE Status = 'Active';

This ensures even transferred items still appear, since theyâ€™re still in your inventory and usable.


---

Would you like me to show you the transfer process flow diagram (from Location A âœ B âœ C) â€” showing how the status and records update automatically for cables, boxes, and pieces?
